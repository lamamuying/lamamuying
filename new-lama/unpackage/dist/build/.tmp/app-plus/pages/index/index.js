(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{1972:function(t,e,i){"use strict";i.r(e);var a=i("4f8f"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},2036:function(t,e,i){"use strict";i.r(e);var a=i("ee10"),o=i("1972");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("9cd1");var n=i("2877"),c=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,null,null);e["default"]=c.exports},2071:function(t,e,i){"use strict";i.r(e);var a=i("68e7"),o=i("e44b");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("ec6f");var n=i("2877"),c=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,null,null);e["default"]=c.exports},"4f8f":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,o,s=r(i("a3f5")),n=r(i("9cb8")),c=r(i("2071"));function r(t){return t&&t.__esModule?t:{default:t}}var d={components:{headerSearch:s.default,indexCon:n.default,pageCon:c.default},data:function(){return{cateid:"0",headerPosition:"fixed",category:[],chidCategory:[],cateCurrentIndex:0,swiperList:[{sid:0,cid:7100,src:"自定义src0",img:"http://static.lamamuying.com/static/images/banner/banner1.jpg"},{sid:1,cid:7109,src:"自定义src1",img:"http://static.lamamuying.com/static/images/banner/banner2.jpg"},{sid:2,cid:7095,src:"自定义src2",img:"http://static.lamamuying.com/static/images/banner/banner3.jpg"},{sid:3,cid:7909,src:"自定义src3",img:"http://static.lamamuying.com/static/images/banner/banner4.jpg"}],goodsList:[],recGoods:[],loadingType:1,page:1,identity:1,shopOrd:"",showLoadMore:!1}},onLoad:function(){var e=this;a=t.getStorageSync("userLoginInfo"),o=t.getStorageSync("locationShop"),void 0==o.id?t.getLocation({type:"gcj02",success:function(i){var s=t.getStorageSync("userLoginInfo"),n=i.latitude,c=i.longitude;t.request({url:e.apiUrl+"user/getLocation",method:"GET",data:{lat:n,lng:c,uid:s.id},success:function(i){o=i.data.data,e.shopOrd=o,t.setStorageSync("locationShop",o),a.identity&&(e.identity=a.identity),e.page=1,e.goodsList=[],e.recGoods=[],e.getRecGoodsData(),e.getGoodsCategory(),e.getGoodsList()},fail:function(){console.log("无法获取定位")}})},fail:function(t){console.log(JSON.stringify(t)),console.log("获取定位失败")}}):(this.shopOrd=o,a.identity&&(this.identity=a.identity),this.page=1,this.goodsList=[],this.recGoods=[],this.getRecGoodsData(),this.getGoodsCategory(),this.getGoodsList())},onShow:function(){},onUnload:function(){this.goodsList=[],this.loadMoreText="加载更多",this.showLoadMore=!1},onReachBottom:function(){this.getGoodsList()},methods:{scanCode:function(){var e=this;t.scanCode({success:function(i){t.request({url:e.apiUrl+"user/getUser",method:"GET",data:{uid:i.result},success:function(i){t.setStorageSync("referee",i.data.data.id),t.setStorageSync("locationShop",i.data.data.shop),e.goodsList=[],e.recGoods=[],e.page=1,e.getGoodsList(),e.getRecGoodsData()},fail:function(){},complete:function(){}}),t.showToast({title:"扫描成功"}),t.switchTab({url:"/pages/index/index"})}})},tabChange:function(t){this.loadingType=1;var e=t.currentTarget.dataset.cateid,i=t.currentTarget.dataset.index;if(this.cateCurrentIndex===i)return!1;this.cateCurrentIndex=i,this.page=1,this.cateid=e,this.goodsList=[],this.getGoodsList(),this.getGoodsCategory(),this.getChildCategory()},getChildCategory:function(){if(this.cateid>0)for(var t=0;this.category.length>t;t++)this.category[t].cid==this.cateid&&(this.chidCategory=this.category[t].child)},getGoodsCategory:function(){var e=this;t.request({url:this.apiUrl+"goods/getCategory",method:"GET",data:{},success:function(t){0==t.data.code&&(t.data.data.unshift({cid:0,cat_name:"全部",pid:0}),e.category=t.data.data)}})},getGoodsList:function(){var e=this;this.page<2&&t.showLoading({title:"数据加载中..."}),t.request({url:this.apiUrl+"goods/getGoodsList",method:"GET",data:{shop_id:o.id,page:this.page,cid:this.cateid,identity:this.identity,limit:10},success:function(t){if(0==t.data.code){if(Array.isArray(t.data.data)&&0===t.data.data.length)return void(e.loadingType=2);e.showLoadMore=!0,e.page++;var i=[];t.data.data.forEach(function(t){i.push(t)}),e.goodsList=e.goodsList.concat(i)}},fail:function(){t.showToast({title:"获取数据失败",icon:"none"})},complete:function(){t.hideLoading()}})},getRecGoodsData:function(){var e=this;t.request({url:this.apiUrl+"goods/getGoods",method:"GET",data:{shop_id:o.id,rec:1,identity:this.identity},success:function(t){0==t.data.code&&(e.recGoods=t.data.data)},fail:function(){t.showToast({title:"获取数据失败",icon:"none"})},complete:function(){}})}}};e.default=d}).call(this,i("6e42")["default"])},"59ac":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("80c7")),o=s(i("343a"));function s(t){return t&&t.__esModule?t:{default:t}}var n={props:{type:String,recGoods:Array,goodsList:Array,loadMoreText:String,showLoadMore:Boolean,cateid:String,chidCategory:Array,loadingType:Number},components:{twoGoods:a.default,uniLoadMore:o.default},data:function(){return{}},onLoad:function(){},methods:{}};e.default=n},"68e7":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[0==t.cateid?i("view",{staticStyle:{"padding-top":"0",background:"#FFFFFF"}},[i("view",{staticClass:"uni-flex uni-row",staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[i("scroll-view",{staticClass:"scroll-view_H",attrs:{"scroll-x":"true","scroll-left":"100"}},t._l(t.recGoods,function(e,a){return i("navigator",{key:a,staticClass:"uni-product",staticStyle:{display:"inline-block","-webkit-box-align":"center"},attrs:{"hover-class":"none",url:"/pages/goods/goods_detail?goods_id="+e.id}},[i("view",{staticClass:"image-view",staticStyle:{width:"240rpx",height:"240rpx"}},[i("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.image}})]),i("view",{staticClass:"uni-product-title rec_pageTitle",staticStyle:{width:"240rpx"}},[t._v(t._s(e.name))]),i("view",[i("text",{staticClass:"uni-product-price-original"},[t._v("￥"+t._s(e.price))]),i("text",{staticClass:"uni-product-price-favour"},[t._v("￥"+t._s(e.market_price))])])])}))],1)]):t._e(),t.cateid>0?i("view",{staticStyle:{padding:"20rpx","padding-top":"0",background:"#FFFFFF"}},[i("view",{staticClass:"uni-flex uni-row",staticStyle:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},[i("scroll-view",{staticClass:"scroll-view_H",attrs:{"scroll-x":"true","scroll-left":"100"}},t._l(t.chidCategory,function(e,a){return i("navigator",{key:a,staticClass:"uni-product",staticStyle:{display:"inline-block","-webkit-box-align":"center"},attrs:{"hover-class":"none",url:"/pages/goods/goods_list?cid="+e.cid}},[i("view",{staticClass:"image-view",staticStyle:{width:"240rpx",height:"240rpx"}},[i("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.image}})]),i("view",{staticClass:"uni-product-title rec_pageTitle",staticStyle:{width:"240rpx","text-align":"center"}},[t._v(t._s(e.cat_name))])])}))],1)]):t._e(),i("view",{staticStyle:{width:"100%",background:"#F6F6F6"}},[i("image",{staticStyle:{width:"100%",height:"66rpx","margin-top":"20rpx"},attrs:{src:"http://static.lamamuying.com/static/images/lam-14_r2_c1.png"}}),i("view",{staticClass:"uni-product-list home_conter",staticStyle:{"justify-content":"flex-start"}},t._l(t.goodsList,function(t,e){return i("navigator",{key:e,attrs:{"hover-class":"none",url:"/pages/goods/goods_detail?goods_id="+t.id}},[i("two-goods",{attrs:{data:t,mpcomid:"0c815122-0-"+e}})],1)})),i("uni-load-more",{attrs:{color:"#333",loadingType:t.loadingType,mpcomid:"0c815122-1"}})],1)])},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})},"8b33":function(t,e,i){"use strict";i("1db4");var a=s(i("b0ce")),o=s(i("2036"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(o.default))},"9cd1":function(t,e,i){"use strict";var a=i("9e7c"),o=i.n(a);o.a},"9e7c":function(t,e,i){},d140:function(t,e,i){},e44b:function(t,e,i){"use strict";i.r(e);var a=i("59ac"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},ec6f:function(t,e,i){"use strict";var a=i("d140"),o=i.n(a);o.a},ee10:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("header-search",{attrs:{type:"home",eventid:"fdfd28ca-0",mpcomid:"fdfd28ca-0"},on:{scanCode:t.scanCode}}),i("view",{staticClass:"home-header-cate"},[i("scroll-view",{staticClass:"home-tab-title lama-center",attrs:{"scroll-x":"true",id:"home-tab-title"}},t._l(t.category,function(e,a){return i("view",{key:a,class:[t.cateCurrentIndex===a?"home-tab-current":""],attrs:{"data-cateid":e.cid,"data-index":a,eventid:"fdfd28ca-1-"+a},on:{click:t.tabChange}},[t._v(t._s(e.cat_name))])}))],1),i("view",[i("view",{staticClass:"swiper-view",attrs:{eventid:"fdfd28ca-2"},on:{click:t.goGoods}},[i("swiper",{staticClass:"swiper",attrs:{"indicator-dots":"true",autoplay:"true",circular:"true","indicator-active-color":"#ffffff"}},t._l(t.swiperList,function(t,e){return i("swiper-item",{key:t.sid,attrs:{mpcomid:"fdfd28ca-1-"+e}},[i("image",{attrs:{mode:"aspectFill widthFix",src:t.img}})])})),i("view",{staticClass:"keep-out"})],1),0==t.cateid?i("index-con",{attrs:{type:"home",mpcomid:"fdfd28ca-2"}}):t._e(),i("view",{staticClass:"store"},[i("view",{staticClass:"uni-flex uni-row storeName"},[i("view",{staticClass:"img"},[i("image",{attrs:{src:t.shopOrd.shop_logo}})]),i("view",{staticClass:"uni-flex uni-column name "},[i("text",{staticStyle:{"font-size":"34rpx","font-weight":"500"}},[t._v(t._s(t.shopOrd.shop_name))]),i("text",{staticClass:"shopping"},[t._v("辣妈母婴合作门店")])])])]),i("page-con",{attrs:{recGoods:t.recGoods,goodsList:t.goodsList,chidCategory:t.chidCategory,cateid:t.cateid,loadingType:t.loadingType,showLoadMore:t.showLoadMore,mpcomid:"fdfd28ca-3"}})],1)],1)},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})}},[["8b33","common/runtime","common/vendor"]]]);