(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pay/pay"],{"0fb2":function(t,e,a){"use strict";a.r(e);var i=a("9fa0"),n=a("cae8");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("35c7");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},1212:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,n=o(a("e636")),s=o(a("0fb2"));function o(t){return t&&t.__esModule?t:{default:t}}var r={data:function(){return{orderData:[],order_trade_no:"",modalHidden:!0,modalHidden2:!0,openAttr:!1,isdefault:!0,checked:1,radioItems:[{name:"微信支付",value:"1",icon:"http://static.lamamuying.com/static/images/wx_icon.png",checked:"true"},{name:"支付宝支付",icon:"http://static.lamamuying.com/static/images/alipay_icon.png",value:"2"}]}},onLoad:function(e){e.order_trade_no?(this.order_trade_no=e.order_trade_no,this.getOrder()):t.showToast({title:"参数错误",icon:"none"})},onShow:function(){},components:{myDrawer:n.default,pay:s.default},methods:{showWeixin:function(){var e=this;t.request({url:this.apiUrl+"pay/mpPay",method:"GET",data:{type:"order",order_trade_no:this.order_trade_no},success:function(a){if(0==a.data.code){var i=a.data;e.payParams=i.data,t.requestPayment({provider:"wxpay",timeStamp:e.payParams.timeStamp,nonceStr:e.payParams.nonceStr,package:e.payParams.package,signType:e.payParams.signType,paySign:e.payParams.paySign,success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})}},fail:function(){},complete:function(){}})},showApp:function(){this.openAttr=!0,this.isdefault=!1},goAppPay:function(){this.orderData.amount;1==this.checked?(t.showLoading({title:"加载中..."}),t.request({url:this.apiUrl+"pay/appWechat",method:"GET",data:{order_trade_no:this.order_trade_no,type:"order"},success:function(e){0==e.data.code&&t.requestPayment({provider:"wxpay",orderInfo:e.data.data,success:function(e){t.showToast({title:"支付成功"}),t.reLaunch({url:"../order/order"})},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},fail:function(){},complete:function(){t.hideLoading()}})):(t.showLoading({title:"加载中..."}),t.request({url:this.apiUrl+"pay/appAlipay",method:"GET",data:{order_trade_no:this.order_trade_no,type:"order"},success:function(e){0==e.data.code&&t.requestPayment({provider:"alipay",orderInfo:e.data.data,success:function(e){t.showToast({title:"支付成功"}),t.reLaunch({url:"../order/order"})},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},fail:function(){},complete:function(){t.hideLoading()}}))},radioChange:function(t){var e=this;this.checked=t.detail.value,this.radioItems.forEach(function(t){t.value==e.checked?t.checked=!0:t.checked=!1})},noTitlemodalTap:function(e){t.showModal({content:"要取消吗？",success:function(e){e.confirm?(console.log("用户点击确定"),t.redirectTo({url:"../order/order"})):e.cancel&&console.log("用户点击取消")}})},getOrder:function(){var e=this;i=this.userLoginInfo("../order/firm_order",1),t.showLoading({title:"数据加载中..",mask:!0}),t.request({url:this.apiUrl+"user/getOrderView",method:"GET",data:{uid:i.id,order_trade_no:this.order_trade_no},success:function(t){0==t.data.code&&(e.orderData=t.data.data)},fail:function(){},complete:function(){t.hideLoading()}})},closeAttr:function(){this.openAttr=!1,this.isdefault=!0}}};e.default=r}).call(this,a("6e42")["default"])},"2b3d":function(t,e,a){"use strict";var i=a("c1de"),n=a.n(i);n.a},"35c7":function(t,e,a){"use strict";var i=a("b035"),n=a.n(i);n.a},5828:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[t._m(0),a("view",{staticClass:"uni-row address"},[a("image",{staticClass:"address-logo",attrs:{src:"http://static.lamamuying.com/static/images/56.png",mode:""}}),a("view",{staticClass:"uni-column add"},[a("view",[a("text",[t._v(t._s(t.orderData.address_name))]),a("text",{staticStyle:{color:"#999","padding-left":"20rpx"}},[t._v(t._s(t.orderData.address_tel))])]),a("view",[t._v(t._s(t.orderData.address_address))])])]),a("view",{staticClass:"goodsList uni-column"},[t._l(t.orderData.goods,function(e,i){return a("view",{key:i,staticClass:"goods uni-row"},[a("image",{staticClass:"goods_image",attrs:{src:e.image}}),a("view",{staticClass:"uni-column message"},[a("view",{staticClass:"goodsName"},[t._v(t._s(e.goods_name))]),a("view",{staticClass:"size"},[t._v("属性:"+t._s(e.goods_attr_value))])]),a("view",{staticClass:"price uni-column"},[a("text",[t._v("￥"+t._s(e.price))]),a("view",{staticStyle:{color:"#999","font-size":"26rpx"}},[t._v("x"+t._s(e.num))])])])}),a("view",{staticClass:"goodsMoney uni-row"},[a("text",[t._v("运费")]),a("text",{staticClass:"over"},[t._v("￥"+t._s(t.orderData.freight))])]),a("view",{staticClass:"goodsMoney uni-row"},[a("text",[t._v("优惠")]),a("text",{staticClass:"over"},[t._v("-￥"+t._s(t.orderData.discount))])]),a("view",{staticClass:"goodsMoney uni-row"},[a("text",{staticStyle:{"font-size":"28rpx",color:"#333"}},[t._v("实付款(含运费)")]),a("text",{staticStyle:{color:"#F96400",width:"73%","text-align":"right"}},[t._v("￥"+t._s(t.orderData.amount))])])],2),a("view",{staticClass:"orderMessage uni-column"},[a("view",{staticClass:"info"},[t._v("订单信息")]),a("view",{staticClass:"uni-row number"},[a("text",{staticClass:"orderNum"},[t._v("订单编号：")]),a("text",{staticClass:"num"},[t._v(t._s(t.orderData.order_trade_no))])]),t._m(1),a("view",{staticClass:"uni-row number"},[a("text",{staticClass:"orderNum"},[t._v("创建时间：")]),a("text",{staticClass:"num"},[t._v(t._s(t.orderData.addtime))])])]),a("view",{staticClass:"place"}),t.isdefault?a("view",{staticClass:"payStyle"},[a("view",{staticClass:"close",attrs:{eventid:"0d660ff2-0"},on:{tap:t.noTitlemodalTap}},[t._v("取消订单")]),a("view",{staticClass:"payMoney",attrs:{eventid:"0d660ff2-1"},on:{tap:t.showApp}},[t._v("付款")])]):t._e(),a("my-drawer",{attrs:{visible:t.openAttr,mode:"right",eventid:"0d660ff2-5",mpcomid:"0d660ff2-1"},on:{close:t.closeAttr}},[a("view",{staticClass:"attr-pop-box"},[a("view",{staticClass:"attr-pop"},[a("view",{staticClass:"close",attrs:{eventid:"0d660ff2-2"},on:{click:t.closeAttr}},[a("img",{staticClass:"icon",attrs:{src:"http://static.lamamuying.com/static/images/icon_close.png"}})]),a("view",{staticClass:"uni-flex",staticStyle:{"justify-content":"center"}},[a("text",{staticStyle:{"font-size":"32rpx",color:"#333"}},[t._v("确认付款"),a("text",{staticStyle:{color:"#FF4965","margin-left":"20rpx"}},[t._v("￥"+t._s(t.orderData.amount))])])]),a("view",{staticStyle:{"margin-top":"60rpx"}},[a("radio-group",{attrs:{eventid:"0d660ff2-4",mpcomid:"0d660ff2-0"},on:{change:t.radioChange}},[t._l(t.radioItems,function(e,i){return a("label",{key:i,staticStyle:{display:"flex","align-items":"center","border-bottom":"1px solid #DDD",padding:"30rpx 20rpx"}},[a("view",{staticStyle:{width:"40%"}},[a("label",{staticClass:"uni-flex flex-row",attrs:{for:e.value}},[a("image",{staticStyle:{width:"60rpx"},attrs:{src:e.icon,mode:"widthFix"}}),a("view",{staticStyle:{"align-items":"center",display:"flex","margin-left":"20rpx"}},[t._v(t._s(e.name))])])],1),a("view",{staticStyle:{flex:"1","justify-content":"flex-end","text-align":"right"}},[a("radio",{attrs:{color:"#ff4965",id:e.value,value:e.value,checked:e.checked}})],1)])}),a("view",{staticClass:"uni-flex",staticStyle:{"justify-content":"center","margin-top":"40rpx"},attrs:{eventid:"0d660ff2-3"},on:{click:t.goAppPay}},[a("button",{staticClass:"uni-flex btn",staticStyle:{"justify-content":"center","border-radius":"20rpx"}},[a("text",[t._v("确认支付")])])],1)],2)],1)])])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"flex-item uni-row"},[a("view",{staticClass:"uni-column"},[a("view",{staticClass:"wait"},[t._v("等待买家付款")])]),a("span",{staticClass:"iconfont waitImge",staticStyle:{"font-size":"90rpx","margin-bottom":"30rpx",color:"#fff"}},[t._v("")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"uni-row number"},[a("text",{staticClass:"orderNum"},[t._v("付款交易号：")]),a("text",[t._v("2840379358249321174564534")])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"82f7":function(t,e,a){"use strict";a("1db4");var i=s(a("b0ce")),n=s(a("b09d"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(n.default))},"9fa0":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",[a("view",{staticClass:"payMoney",attrs:{eventid:"615802d7-0"},on:{tap:t.showBanner}},[t._v("付款")])]),t.bannerShow?a("view",{staticClass:"uni-banner",staticStyle:{background:"#FFFFFF"}},[a("view",{attrs:{eventid:"615802d7-1"},on:{tap:t.closeBanner}},[t._m(0)]),a("view",{staticClass:"uni-column btn"},[a("view",{staticClass:"price"},[a("text",{staticStyle:{"font-size":"40rpx","font-weight":"normal"}},[t._v("￥")]),t._v(t._s(t.amount))]),t._m(1),a("view",{staticClass:"submit",attrs:{eventid:"615802d7-2"},on:{click:t.wxappPay}},[t._v("app确认")])])]):t._e(),t.bannerShow?a("view",{staticClass:"uni-mask"}):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticStyle:{"text-align":"left",padding:"20rpx"}},[a("text",{staticClass:"uni-icon uni-icon-close"}),a("text",{staticStyle:{"margin-left":"30%","font-size":"32rpx",color:"#333"}},[t._v("确认付款")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"information uni-column"},[a("view",{staticClass:"uni-row pay"},[a("text",[t._v("付款方式")]),a("text",[t._v("微信支付")])])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},a40a:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{amount:null,orderTradeNo:null},data:function(){return{bannerShow:!1}},onBackPress:function(){if(this.bannerShow)return this.bannerShow=!0,!1},methods:{wxpay:function(){var e=this;t.request({url:this.apiUrl+"pay/mpPay",method:"GET",data:{type:"order",order_trade_no:this.orderTradeNo},success:function(a){if(0==a.data.code){var i=a.data;e.payParams=i.data,t.requestPayment({provider:"wxpay",timeStamp:e.payParams.timeStamp,nonceStr:e.payParams.nonceStr,package:e.payParams.package,signType:e.payParams.signType,paySign:e.payParams.paySign,success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})}},fail:function(){},complete:function(){}})},wxappPay:function(){t.requestPayment({provider:"wxpay",orderInfo:"orderInfo",success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},closeBanner:function(){this.bannerShow=!1},showBanner:function(){this.bannerShow=!0},submit:function(){t.navigateTo({url:"",success:function(t){},fail:function(){},complete:function(){}})}}};e.default=a}).call(this,a("6e42")["default"])},ad63:function(t,e,a){"use strict";a.r(e);var i=a("1212"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},b035:function(t,e,a){},b09d:function(t,e,a){"use strict";a.r(e);var i=a("5828"),n=a("ad63");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("2b3d");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},c1de:function(t,e,a){},cae8:function(t,e,a){"use strict";a.r(e);var i=a("a40a"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a}},[["82f7","common/runtime","common/vendor"]]]);