(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods_list"],{"09a8":function(t,e,s){"use strict";s.r(e);var i=s("dc4d"),o=s("673e");for(var a in o)"default"!==a&&function(t){s.d(e,t,function(){return o[t]})}(a);s("580f");var r=s("2877"),n=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=n.exports},"580f":function(t,e,s){"use strict";var i=s("b1fb"),o=s.n(i);o.a},"673e":function(t,e,s){"use strict";s.r(e);var i=s("b7a6"),o=s.n(i);for(var a in i)"default"!==a&&function(t){s.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},b1fb:function(t,e,s){},b7a6:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,o,a=d(s("56be")),r=d(s("80c7")),n=d(s("a3f5")),c=d(s("343a"));function d(t){return t&&t.__esModule?t:{default:t}}var l={data:function(){return{headerPosition:"fixed",priceSort:"",saleSort:"",goodsList:[],sortType:"",page:1,loadingType:1,showLoadMore:!1,keyword:"",cateId:0}},onLoad:function(e){this.keyword=e.keyword,e.cid&&(this.cateId=e.cid),o=t.getStorageSync("userLoginInfo"),o.identity&&(this.identity=o.identity),i=t.getStorageSync("locationShop"),this.getGoodsList()},onUnload:function(){this.goodsList=[],this.loadMoreText="加载更多",this.showLoadMore=!1},onReachBottom:function(){this.getGoodsList()},components:{mSearch:a.default,twoGoods:r.default,headerSearch:n.default,uniLoadMore:c.default},methods:{navigateBack:function(){t.navigateBack()},setKeyword:function(t){this.keyword=t,this.loadingType=1,this.page=1,this.goodsList=[],this.getGoodsList()},getGoodsList:function(){var e,s,o=this;this.page<2&&t.showLoading({title:"数据加载中..."}),e="price"==this.sortType?this.priceSort:this.saleSort,s=this.keyword?{shop_id:i.id,page:this.page,name:this.keyword,limit:10,type:this.sortType,sort:e,identity:this.identity}:{shop_id:i.id,page:this.page,cid:this.cateId,limit:10,type:this.sortType,sort:e,identity:this.identity},t.request({url:this.apiUrl+"goods/getGoodsList",method:"GET",data:s,success:function(t){if(0==t.data.code){if(Array.isArray(t.data.data)&&0===t.data.data.length)return void(o.loadingType=2);t.data.data.length<10&&(o.loadingType=2),o.showLoadMore=!0,o.page++;var e=[];t.data.data.forEach(function(t){e.push(t)}),o.goodsList=o.goodsList.concat(e)}},fail:function(){t.showToast({title:"获取数据失败",icon:"none"})},complete:function(){t.hideLoading()}})},sortList:function(t){var e=t.currentTarget;this.sortType=e.dataset.type,"price"==e.dataset.type?("asc"==this.priceSort?this.priceSort="desc":this.priceSort="asc",this.saleSort=""):"sale"==e.dataset.type?("asc"==this.saleSort?this.saleSort="desc":this.saleSort="asc",this.priceSort=""):(this.priceSort="",this.saleSort="",this.sortType=""),this.loadingType=1,this.goodsList=[],this.page=1,this.getGoodsList()},blur:function(){t.hideKeyboard()}}};e.default=l}).call(this,s("6e42")["default"])},d266:function(t,e,s){"use strict";s("1db4");var i=a(s("b0ce")),o=a(s("09a8"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(o.default))},dc4d:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",[s("header-search",{attrs:{type:"page",keyword:t.keyword,eventid:"916bbc8c-0",mpcomid:"916bbc8c-0"},on:{setKeyword:t.setKeyword}}),s("view",{staticClass:"search-keyword",attrs:{eventid:"916bbc8c-4"},on:{touchstart:t.blur}},[s("view",{directives:[{name:"show",rawName:"v-show",value:t.isShowKeywordList,expression:"isShowKeywordList"}],staticClass:"keyword-list-box",attrs:{"scroll-y":""}},t._l(t.keywordList,function(e,i){return s("view",{key:e.keyword,staticClass:"keyword-entry",attrs:{"hover-class":"keyword-entry-tap"}},[t._m(0,!0)])})),s("view",{staticClass:"select"},[s("view",{attrs:{"data-type":"default",eventid:"916bbc8c-1"},on:{click:t.sortList}},[t._v("默认")]),s("view",{staticClass:"uni-flex uni-row",staticStyle:{color:"#000000","justify-content":"center"},attrs:{"data-type":"price",eventid:"916bbc8c-2"},on:{click:t.sortList}},[t._v("价格"),s("view",{staticClass:"uni-flex uni-column",staticStyle:{"line-height":"84rpx"}},[s("span",{staticClass:"iconfont",class:"asc"==t.priceSort?"sort-chose":"",staticStyle:{"font-size":"40rpx",width:"20rpx",height:"14rpx"}},[t._v("")]),s("span",{staticClass:"iconfont",class:"desc"==t.priceSort?"sort-chose":"",staticStyle:{"font-size":"40rpx",width:"20rpx",height:"14rpx"}},[t._v("")])])]),s("view",{staticClass:"uni-flex uni-row",staticStyle:{color:"#000000","justify-content":"center"},attrs:{"data-type":"sale",eventid:"916bbc8c-3"},on:{click:t.sortList}},[t._v("销量"),s("view",{staticClass:"uni-flex uni-column",staticStyle:{"line-height":"84rpx"}},[s("span",{staticClass:"iconfont",class:"asc"==t.saleSort?"sort-chose":"",staticStyle:{"font-size":"40rpx",width:"20rpx",height:"14rpx"}},[t._v("")]),s("span",{staticClass:"iconfont",class:"desc"==t.saleSort?"sort-chose":"",staticStyle:{"font-size":"40rpx",width:"20rpx",height:"14rpx"}},[t._v("")])])])]),s("view",{staticStyle:{width:"100%",background:"#F6F6F6 !important"}},[s("view",{staticClass:"uni-product-list home_conter",staticStyle:{"justify-content":"flex-start"}},t._l(t.goodsList,function(t,e){return s("block",{key:e},[s("navigator",{attrs:{"hover-class":"none",url:"/pages/goods/goods_detail?goods_id="+t.id}},[s("two-goods",{attrs:{data:t,mpcomid:"916bbc8c-1-"+e}})],1)],1)})),s("uni-load-more",{attrs:{color:"#333",loadingType:t.loadingType,mpcomid:"916bbc8c-2"}})],1)])],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"keyword-img"},[s("image",{attrs:{src:"http://static.lamamuying.com/static/HM-search/back.png"}})])}];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return o})}},[["d266","common/runtime","common/vendor"]]]);