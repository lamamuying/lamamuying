(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/firm_order"],{2708:function(t,e,s){},"3b0b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"uni-numbox"},[s("view",{staticClass:"uni-numbox-minus",class:{"uni-numbox-disabled":t.disableSubtract},attrs:{eventid:"3d43bfac-0"},on:{click:function(e){t._calcValue("subtract")}}},[t._v("-")]),s("input",{staticClass:"uni-numbox-value",attrs:{type:"number",disabled:t.disabled,value:t.inputValue,eventid:"3d43bfac-1"},on:{blur:t._onBlur}}),s("view",{staticClass:"uni-numbox-plus",class:{"uni-numbox-disabled":t.disableAdd},attrs:{eventid:"3d43bfac-2"},on:{click:function(e){t._calcValue("add")}}},[t._v("+")])])},i=[];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i})},"3b83":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"firm_order"},[s("view",{staticClass:"uni-flex uni-row",staticStyle:{display:"fles","justify-content":"flex-start","align-items":"center",padding:"0 20rpx"},attrs:{eventid:"ef606e30-0"},on:{click:t.changeAdress}},[t._m(0),t.isfault?s("view",{staticStyle:{width:"90%","text-align":"left"}},[s("view",{staticClass:"order_adree uni-flex uni-row"},[s("text",[t._v("收货人："+t._s(t.adressInfo.name))]),s("text",[t._v(t._s(t.adressInfo.mobile))])]),s("view",{staticClass:"firm_icon"},[s("view",{staticStyle:{"line-height":"30rpx"}},[s("text",[t._v("收货地址："+t._s(t.adressInfo.province)+t._s(t.adressInfo.city)+t._s(t.adressInfo.area)+t._s(t.adressInfo.address))])])])]):s("view",{staticClass:"order_adree"},[s("view",{staticStyle:{"justify-content":"center"}},[t._v("快去添加收货地址吧")])])]),t._m(1),s("view",[t._l(t.selectGoods,function(e,a){return s("view",{key:a,staticClass:"order_goods"},[s("navigator",{staticClass:"uni-list",attrs:{"hover-class":"none",url:"/pages/goods/goods_detail?goods_id="+e.goods_id}},[s("view",{staticClass:"uni-list-cell"},[s("view",{staticClass:"uni-media-list"},[s("image",{staticClass:"uni_firm logo",attrs:{src:e.image}}),s("view",{staticClass:"uni-media-list-body"},[s("view",{staticClass:" firm_title"},[t._v(t._s(e.goods_name))]),s("view",{staticClass:"order_store"},[s("text",[t._v("属性:"+t._s(e.attr))])]),s("view",{staticClass:"uni-media-list-text-bottom"},[s("text",{staticStyle:{color:"#E75265"}},[t._v("￥"+t._s(e.price))]),s("text",{staticClass:"Ocolor"},[t._v("X"+t._s(e.num))])])])])])])],1)}),t._m(2)],2),s("view",{staticClass:"order_pay"},[s("view",{staticClass:"chose-all"},[s("view",{staticClass:"words_foot uni-flex uni-row"},[s("text",[t._v("共"),s("text",{staticStyle:{color:"#ff4965"}},[t._v(t._s(t.num))]),t._v("件商品")])])]),s("view",{staticClass:"price"},[t._v("合计：￥"+t._s(t.totalPrice))]),s("view",{staticClass:"submit"},[s("button",{staticClass:"btn",attrs:{eventid:"ef606e30-1"},on:{click:t.payMony}},[t._v("提交订单")])],1)]),s("view",{staticStyle:{height:"100rpx"}})])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"address",staticStyle:{width:"10%"}},[s("span",{staticClass:"iconfont img_icon",staticStyle:{"font-size":"52rpx"}},[t._v("")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"hr"},[s("image",{attrs:{src:"http://static.lamamuying.com/static/images/hr.png"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"words"},[s("view",{staticClass:"words_top uni-flex uni-row"},[s("text",[t._v("买家留言")]),s("input",{staticClass:"words_ps",attrs:{type:"text",value:""}})])])}];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i})},4085:function(t,e,s){},"524a":function(t,e,s){"use strict";s.r(e);var a=s("3b83"),i=s("85a9");for(var n in i)"default"!==n&&function(t){s.d(e,t,function(){return i[t]})}(n);s("669d");var r=s("2877"),o=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},"669d":function(t,e,s){"use strict";var a=s("2708"),i=s.n(a);i.a},"85a9":function(t,e,s){"use strict";s.r(e);var a=s("89b8"),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);e["default"]=i.a},"88d8":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"cart-number-box",props:{value:{type:Number,default:0},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:this.value}},computed:{disableSubtract:function(){return this.value<=this.min},disableAdd:function(){return this.value>=this.max}},watch:{value:function(t){this.inputValue=t},inputValue:function(t){this.$emit("change",t)}},methods:{_calcValue:function(t){var e=this._getDecimalScale(),s=this.inputValue*e,a=this.step*e;"subtract"===t?s-=a:"add"===t&&(s+=a),s<this.min||s>this.max||(this.inputValue=s/e)},_getDecimalScale:function(){var t=1;return~~this.step!==this.step&&(t=Math.pow(10,(this.step+"").split(".")[1].length)),t},_onBlur:function(t){var e=t.detail.value;e?(e=+e,e>this.max?e=this.max:e<this.min&&(e=this.min),this.inputValue=e):this.inputValue=0}}};e.default=a},"89b8":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,i,n=r(s("e88b"));function r(t){return t&&t.__esModule?t:{default:t}}var o={components:{cartNumberBox:n.default},data:function(){return{adressInfo:[],selectId:123,isfault:!0,selectGoods:[],num:0,totalPrice:0}},onShow:function(){var e=t.getStorageSync("selectAddress");a=this.userLoginInfo("../order/firm_order",1),e?(this.isfault=!0,this.adressInfo=e):this.getAdress()},onHide:function(){t.removeStorageSync("selectAddress")},onUnload:function(){},onLoad:function(t){if(t.selectGoods){i=t.selectGoods,this.selectGoods=JSON.parse(t.selectGoods);for(var e=0;e<this.selectGoods.length;e++)this.num+=this.selectGoods[e].num,this.totalPrice+=this.selectGoods[e].price*this.selectGoods[e].num}if(t.id)return this.selectId=t.id,void this.getAddressVIew()},methods:{changeAdress:function(){t.navigateTo({url:"../addAdress/address_management"})},payMony:function(){var e=this;if(this.adressInfo.id){var s={shop_id:a.shop.id,address_id:this.adressInfo.id,goods:i,uid:a.id};t.request({url:this.apiUrl+"user/addOrder",method:"GET",data:s,success:function(s){0==s.data.code&&(t.redirectTo({url:"../pay/pay?order_trade_no="+s.data.data.order_trade_no}),e.delCartGoods())}})}else t.showToast({title:"请添加收货地址",icon:"none"})},delCartGoods:function(){for(var e=t.getStorageSync("cartGoods"),s=[],i=0;i<e.length;i++)e[i].uid==a.id&&(s=e[i].goods);this.selectGoods.forEach(function(t,e){s.forEach(function(e,a){t.goods_id==e.goods_id&&t.attr==e.attr&&s.splice(a,1)})});for(var n=[],r=[],o=0;s.length>o;o++)s[o].num>0&&r.push(s[o]);e.forEach(function(t){t.uid==a.id&&(t.goods=r),n.push(t)}),t.setStorageSync("cartGoods",n)},getAddressVIew:function(){var e=this;t.request({url:this.apiUrl+"user/getAddressVIew",method:"GET",data:{uid:a.id,id:this.selectId},success:function(t){0==t.data.code&&(e.adressInfo=t.data.data)},fail:function(){console.log("fail")}})},getAdress:function(){var e=this;t.request({url:this.apiUrl+"user/getAddress",method:"GET",data:{uid:a.id,is_default:1},success:function(t){if(0==t.data.code){if(Array.isArray(t.data.data)&&0===t.data.data.length)return void(e.isfault=!1);e.adressInfo=t.data.data[0]}},fail:function(){console.log("fail")}})}}};e.default=o}).call(this,s("6e42")["default"])},a1b3:function(t,e,s){"use strict";s.r(e);var a=s("88d8"),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);e["default"]=i.a},c4bf:function(t,e,s){"use strict";s("1db4");var a=n(s("b0ce")),i=n(s("524a"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(i.default))},cca1:function(t,e,s){"use strict";var a=s("4085"),i=s.n(a);i.a},e88b:function(t,e,s){"use strict";s.r(e);var a=s("3b0b"),i=s("a1b3");for(var n in i)"default"!==n&&function(t){s.d(e,t,function(){return i[t]})}(n);s("cca1");var r=s("2877"),o=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports}},[["c4bf","common/runtime","common/vendor"]]]);