(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"19c0":function(t,e,a){"use strict";a.r(e);var s=a("b8ef"),o=a("ff43");for(var r in o)"default"!==r&&function(t){a.d(e,t,function(){return o[t]})}(r);a("f4f7");var i=a("2877"),n=Object(i["a"])(o["default"],s["a"],s["b"],!1,null,null,null);e["default"]=n.exports},"6f90":function(t,e,a){"use strict";a("1db4");var s=r(a("b0ce")),o=r(a("19c0"));function r(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(o.default))},b8ef:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",{staticClass:"home-header-cate"},[a("view",{staticClass:"home-tab-title lama-center",attrs:{id:"home-tab-title"}},t._l(t.category,function(e,s){return a("view",{key:s,class:[t.cateCurrentIndex==s?"home-tab-current":""],attrs:{"data-status":e.status,"data-index":s,eventid:"db1748da-0-"+s},on:{click:t.tabChange}},[t._v(t._s(e.name))])}))]),a("view",{staticClass:"places"}),a("view",t._l(t.orderGoodsList,function(e,s){return a("view",{key:s,staticClass:"order_goods"},[a("view",{staticClass:"order_store"},[a("text",[t._v(t._s(e.order_trade_no))]),a("text",[t._v(t._s(e.status))])]),t._l(e.goods,function(o,r){return a("view",{key:r,staticClass:"uni-list",attrs:{eventid:"db1748da-1-"+s+"-"+r},on:{click:function(a){t.goOrderDetail(e.order_trade_no)}}},[a("view",{staticClass:"uni-list-cell"},[a("view",{staticClass:"uni-media-list"},[a("image",{staticClass:"uni_firm logo",attrs:{src:o.image}}),a("view",{staticClass:"uni-media-list-body"},[a("view",{staticClass:" firm_title"},[t._v(t._s(o.goods_attr_value))]),a("view",{staticClass:"uni-media-list-text-bottom"},[a("text",{staticStyle:{color:"#E75265"}},[t._v("￥"+t._s(o.price))]),a("text",{staticClass:"Ocolor"},[t._v("X"+t._s(o.num))])])])])])])}),a("view",{staticClass:"order_operation"},[a("view",[a("text",{staticClass:"num Ocolor"},[t._v("共"+t._s(e.sum)+"件")]),a("text",[t._v("￥"+t._s(e.amount))])]),a("view",{staticClass:"order_button"},[a("text",{directives:[{name:"show",rawName:"v-show",value:"待付款"==e.status||"交易完成"==e.status,expression:"orderGoods.status == '待付款' || orderGoods.status == '交易完成'"}],attrs:{eventid:"db1748da-2-"+s},on:{click:function(a){t.delectOrder(e.order_trade_no)}}},[t._v("删除订单")]),a("text",{directives:[{name:"show",rawName:"v-show",value:"待付款"==e.status,expression:"orderGoods.status == '待付款'"}],attrs:{eventid:"db1748da-3-"+s},on:{click:function(a){t.goPay(e.order_trade_no)}}},[t._v("去付款")]),a("text",{directives:[{name:"show",rawName:"v-show",value:"待发货"===e.status,expression:"orderGoods.status === '待发货'"}]},[t._v("等待发货")]),a("text",{directives:[{name:"show",rawName:"v-show",value:"待收货"==e.status,expression:"orderGoods.status == '待收货'"}],attrs:{eventid:"db1748da-4-"+s},on:{click:function(a){t.conformOrder(e.order_trade_no)}}},[t._v("确认收货")]),a("text",{directives:[{name:"show",rawName:"v-show",value:"待评价"==e.status,expression:"orderGoods.status == '待评价'"}],attrs:{eventid:"db1748da-5-"+s},on:{click:function(a){t.evaluate(e.id,e.goods[0].image)}}},[t._v("去评价")]),a("text",{directives:[{name:"show",rawName:"v-show",value:"待评价"==e.status,expression:"orderGoods.status == '待评价'"}]},[t._v("已完成")])])])],2)})),a("uni-load-more",{staticStyle:{"margin-top":"100rpx"},attrs:{color:"#333",loadingType:t.loadingType,mpcomid:"db1748da-0"}})],1)},o=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return o})},caf6:function(t,e,a){},dfc7:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,o=i(a("3e35")),r=i(a("343a"));function i(t){return t&&t.__esModule?t:{default:t}}var n={data:function(){return{listData:[],last_id:"",reload:!1,headerPosition:"fixed",status:0,category:[{status:0,name:"全部"},{status:1,name:"待付款"},{status:2,name:"待发货"},{status:3,name:"待收货"},{status:4,name:"已完成"}],cateCurrentIndex:0,orderGoodsList:[],goodss:[],sum:0,page:1,loadingType:1}},components:{uniIcon:o.default,uniLoadMore:r.default},onLoad:function(t){t.status&&(this.status=t.status)},onShow:function(){s=this.userLoginInfo("../order/order",1),this.cateCurrentIndex=this.status,this.orderGoodsList=[],this.loadingType=1,this.page=1,this.getOrderList()},onPullDownRefresh:function(){},onReachBottom:function(){this.getOrderList()},onHide:function(){},methods:{navigateBack:function(){t.navigateBack()},getOrderList:function(){var e=this;t.request({url:this.apiUrl+"user/getOrder",method:"GET",data:{uid:s.id,page:this.page,status:this.status},success:function(t){if(0==t.data.code){if(Array.isArray(t.data.data)&&0===t.data.data.length)return void(e.loadingType=2);t.data.data.length<6&&(e.loadingType=2),e.page++;var a=[];t.data.data.forEach(function(t){t.sum=0,t.goods.forEach(function(e){t.sum+=e.num}),a.push(t)}),e.orderGoodsList=e.orderGoodsList.concat(a)}},fail:function(){console.log("fail")}})},tabChange:function(t){this.loadingType=1;var e=t.currentTarget.dataset.status,a=t.currentTarget.dataset.index;this.cateCurrentIndex=a,this.status=e,this.orderGoodsList=[],this.page=1,this.getOrderList()},doSearch:function(){t.navigateTo({url:"../search/search"})},goOrderDetail:function(e){t.navigateTo({url:"./receive_goods?order_trade_no="+e})},evaluate:function(e,a){t.navigateTo({url:"../goods/evaluate?goods_id="+e+"&goods_image="+a})},goPay:function(e){t.redirectTo({url:"../pay/pay?order_trade_no="+e})},delectOrder:function(e){var a=this;t.request({url:this.apiUrl+"user/setOrderStatus",method:"GET",data:{uid:s.id,order_trade_no:e,status:-1},success:function(e){0==e.data.code&&t.showToast({title:"删除成功！",icon:"none",success:function(){a.orderGoodsList=[],a.page=1,a.getOrderList()}})},fail:function(){console.log("fail")}})},conformOrder:function(e){var a=this;t.request({url:this.apiUrl+"user/setOrderStatus",method:"GET",data:{uid:s.id,order_trade_no:e,status:1},success:function(e){0==e.data.code&&t.showToast({title:"已确认收货",icon:"none",success:function(){a.orderGoodsList=[],a.page=1,a.getOrderList()}})},fail:function(){console.log("fail")}})}}};e.default=n}).call(this,a("6e42")["default"])},f4f7:function(t,e,a){"use strict";var s=a("caf6"),o=a.n(s);o.a},ff43:function(t,e,a){"use strict";a.r(e);var s=a("dfc7"),o=a.n(s);for(var r in s)"default"!==r&&function(t){a.d(e,t,function(){return s[t]})}(r);e["default"]=o.a}},[["6f90","common/runtime","common/vendor"]]]);